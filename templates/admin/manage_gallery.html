{% extends 'base.html' %}
{% block title %}Gallery{% endblock %}
{% block content %}
<section class="py-4 bg-light" style="min-height:85vh;"><div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h3 class="fw-bold"><i class="fas fa-images me-2 text-danger"></i>Gallery</h3>
        <div><a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline-secondary me-2"><i class="fas fa-arrow-left me-1"></i>Back</a><button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#addImgModal"><i class="fas fa-plus me-1"></i>Add</button></div>
    </div>
    <div class="modal fade" id="addImgModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content rounded-4">
        <div class="modal-header bg-danger text-white"><h5 class="modal-title">Add Image</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div>
        <form method="POST" action="{{ url_for('add_gallery') }}"><div class="modal-body">
            <div class="mb-3"><label class="form-label fw-bold">Title</label><input type="text" name="title" class="form-control"></div>
            <div class="mb-3"><label class="form-label fw-bold">Image URL *</label><input type="url" name="image_url" class="form-control" required></div>
            <div class="mb-3"><label class="form-label fw-bold">Category</label><select name="category" class="form-select"><option>Campus</option><option>Events</option><option>Sports</option><option>Cultural</option></select></div>
        </div><div class="modal-footer"><button type="submit" class="btn btn-danger"><i class="fas fa-upload me-1"></i>Add</button></div></form>
    </div></div></div>
    <div class="row">{% for img in images %}
    <div class="col-lg-3 col-md-4 col-6 mb-4"><div class="card border-0 shadow-sm rounded-4 overflow-hidden">
        <img src="{{ img.image_url }}" class="card-img-top" style="height:150px;object-fit:cover;">
        <div class="card-body p-2 text-center"><small>{{ img.title or '' }}</small><span class="badge bg-primary">{{ img.category }}</span><br>
        <a href="{{ url_for('delete_gallery', id=img.id) }}" class="btn btn-outline-danger btn-sm mt-1" onclick="return confirm('Remove?')"><i class="fas fa-trash"></i></a></div>
    </div></div>
    {% endfor %}</div>
    {% if not images %}<div class="text-center py-5"><h5 class="text-muted">No images</h5></div>{% endif %}
</div></section>
{% endblock %}